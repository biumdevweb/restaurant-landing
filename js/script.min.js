const hamburger = document.querySelector('.hamburger'); const navMenu = document.querySelector('.nav-menu'); const navLinks = document.querySelectorAll('.nav-link'); const reservationForm = document.getElementById('reservationForm'); const formMessage = document.getElementById('formMessage'); const galleryContainer = document.querySelector('.gallery-container'); const gallerySlides = document.querySelectorAll('.gallery-slide'); const galleryPrev = document.querySelector('.gallery-prev'); const galleryNext = document.querySelector('.gallery-next'); const galleryIndicators = document.querySelectorAll('.indicator'); let currentSlide = 0; const totalSlides = gallerySlides.length; hamburger.addEventListener('click', () => { hamburger.classList.toggle('active'); navMenu.classList.toggle('active'); }); navLinks.forEach(link => { link.addEventListener('click', () => { hamburger.classList.remove('active'); navMenu.classList.remove('active'); }); }); document.querySelectorAll('a[href^="#"]').forEach(anchor => { anchor.addEventListener('click', function (e) { e.preventDefault(); const target = document.querySelector(this.getAttribute('href')); if (target) { target.scrollIntoView({ behavior: 'smooth', block: 'start' }); } }); }); function showSlide(index) { if (index < 0) { currentSlide = totalSlides - 1; } else if (index >= totalSlides) { currentSlide = 0; } else { currentSlide = index; } const offset = -currentSlide * 100; galleryContainer.style.transform = `translateX(${offset}%)`; galleryIndicators.forEach((indicator, i) => { if (i === currentSlide) { indicator.classList.add('active'); } else { indicator.classList.remove('active'); } }); } function nextSlide() { showSlide(currentSlide + 1); } function prevSlide() { showSlide(currentSlide - 1); } function goToSlide(index) { showSlide(index); } if (galleryPrev) { galleryPrev.addEventListener('click', prevSlide); } if (galleryNext) { galleryNext.addEventListener('click', nextSlide); } if (galleryIndicators) { galleryIndicators.forEach((indicator, index) => { indicator.addEventListener('click', () => goToSlide(index)); }); } let touchStartX = 0; let touchEndX = 0; if (galleryContainer) { galleryContainer.addEventListener('touchstart', (e) => { touchStartX = e.changedTouches[0].screenX; }); galleryContainer.addEventListener('touchend', (e) => { touchEndX = e.changedTouches[0].screenX; handleSwipe(); }); } function handleSwipe() { const swipeThreshold = 50; const diff = touchStartX - touchEndX; if (Math.abs(diff) > swipeThreshold) { if (diff > 0) { nextSlide(); } else { prevSlide(); } } } let galleryInterval; function startGalleryAutoPlay() { galleryInterval = setInterval(nextSlide, 5000); } function stopGalleryAutoPlay() { clearInterval(galleryInterval); } if (galleryContainer) { startGalleryAutoPlay(); galleryContainer.addEventListener('mouseenter', stopGalleryAutoPlay); galleryContainer.addEventListener('mouseleave', startGalleryAutoPlay); galleryContainer.addEventListener('touchstart', stopGalleryAutoPlay); galleryContainer.addEventListener('touchend', startGalleryAutoPlay); } if (reservationForm) { reservationForm.addEventListener('submit', function(e) { e.preventDefault(); const name = document.getElementById('name').value.trim(); const email = document.getElementById('email').value.trim(); const phone = document.getElementById('phone').value.trim(); const date = document.getElementById('date').value; const time = document.getElementById('time').value; const guests = document.getElementById('guests').value; const requests = document.getElementById('requests').value.trim(); if (!name || !email || !phone || !date || !time || !guests) { showFormMessage('Per favore, compila tutti i campi obbligatori.', 'error'); return; } if (!isValidEmail(email)) { showFormMessage('Per favore, inserisci un indirizzo email valido.', 'error'); return; } if (!isValidPhone(phone)) { showFormMessage('Per favore, inserisci un numero di telefono valido.', 'error'); return; } const selectedDate = new Date(date); const today = new Date(); today.setHours(0, 0, 0, 0); if (selectedDate < today) { showFormMessage('La data di prenotazione non può essere nel passato.', 'error'); return; } simulateReservationSubmission({ name, email, phone, date, time, guests, requests }); }); } function isValidEmail(email) { const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; return emailRegex.test(email); } function isValidPhone(phone) { const phoneRegex = /^[\d\s\-\+\(\)]+$/; return phoneRegex.test(phone) && phone.replace(/\D/g, '').length >= 8; } function showFormMessage(message, type) { formMessage.textContent = message; formMessage.className = `form-message ${type}`; formMessage.style.display = 'block'; formMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' }); setTimeout(() => { formMessage.style.display = 'none'; }, 5000); } function simulateReservationSubmission(reservationData) { showFormMessage('Elaborazione prenotazione in corso...', 'info'); setTimeout(() => { reservationForm.reset(); showFormMessage(`Grazie ${reservationData.name}! La tua prenotazione per ${reservationData.guests} persone il ${formatDate(reservationData.date)} alle ${reservationData.time} è stata confermata. Ti abbiamo inviato una email di conferma a ${reservationData.email}.`, 'success'); console.log('Reservation data submitted:', reservationData); }, 1500); } function formatDate(dateString) { const options = { day: '2-digit', month: '2-digit', year: 'numeric' }; const date = new Date(dateString); return date.toLocaleDateString('it-IT', options); } document.addEventListener('DOMContentLoaded', () => { const dateInput = document.getElementById('date'); if (dateInput) { const today = new Date(); const formattedDate = today.toISOString().split('T')[0]; dateInput.setAttribute('min', formattedDate); } if (gallerySlides.length > 0) { showSlide(0); } const currentYearElement = document.getElementById('current-year'); if (currentYearElement) { currentYearElement.textContent = new Date().getFullYear(); } }); const observerOptions = { threshold: 0.1, rootMargin: '0px 0px -50px 0px' }; const observer = new IntersectionObserver((entries) => { entries.forEach(entry => { if (entry.isIntersecting) { entry.target.style.opacity = '1'; entry.target.style.transform = 'translateY(0)'; } }); }, observerOptions); document.addEventListener('DOMContentLoaded', () => { const animatedElements = document.querySelectorAll('.menu-category, .gallery-carousel, .about-text, .reservation-info, .contact-info'); animatedElements.forEach(el => { el.style.opacity = '0'; el.style.transform = 'translateY(20px)'; el.style.transition = 'opacity 0.6s ease, transform 0.6s ease'; observer.observe(el); }); }); window.addEventListener('scroll', () => { const header = document.querySelector('.header'); if (window.scrollY > 100) { header.style.backgroundColor = 'rgba(255, 255, 255, 0.98)'; } else { header.style.backgroundColor = 'rgba(255, 255, 255, 0.95)'; } }); document.addEventListener('DOMContentLoaded', () => { const lazyImages = document.querySelectorAll('img[data-src]'); if ('IntersectionObserver' in window) { const imageObserver = new IntersectionObserver((entries, observer) => { entries.forEach(entry => { if (entry.isIntersecting) { const img = entry.target; img.src = img.dataset.src; img.classList.remove('lazy'); imageObserver.unobserve(img); } }); }); lazyImages.forEach(img => { imageObserver.observe(img); }); } else { lazyImages.forEach(img => { img.src = img.dataset.src; }); } }); function isInViewport(element) { const rect = element.getBoundingClientRect(); return ( rect.top >= 0 && rect.left >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) && rect.right <= (window.innerWidth || document.documentElement.clientWidth) ); } window.addEventListener('scroll', () => { let current = ''; const sections = document.querySelectorAll('section'); sections.forEach(section => { const sectionTop = section.offsetTop; const sectionHeight = section.clientHeight; if (pageYOffset >= (sectionTop - 200)) { current = section.getAttribute('id'); } }); navLinks.forEach(link => { link.classList.remove('active'); if (link.getAttribute('href').slice(1) === current) { link.classList.add('active'); } }); }); document.addEventListener('DOMContentLoaded', () => { console.log('Osteria della Tradizione website loaded successfully!'); document.addEventListener('keydown', (e) => { if (e.key === 'ArrowLeft') { prevSlide(); } else if (e.key === 'ArrowRight') { nextSlide(); } }); document.addEventListener('visibilitychange', () => { if (document.hidden) { stopGalleryAutoPlay(); } else { startGalleryAutoPlay(); } }); });