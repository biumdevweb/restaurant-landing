const hamburger=document.querySelector('.hamburger'),navMenu=document.querySelector('.nav-menu'),navLinks=document.querySelectorAll('.nav-link'),reservationForm=document.getElementById('reservationForm'),formMessage=document.getElementById('formMessage'),galleryContainer=document.querySelector('.gallery-container'),gallerySlides=document.querySelectorAll('.gallery-slide'),galleryPrev=document.querySelector('.gallery-prev'),galleryNext=document.querySelector('.gallery-next'),galleryIndicators=document.querySelectorAll('.indicator'),totalSlides=gallerySlides.length;let currentSlide=0,touchStartX=0,touchEndX=0,galleryInterval;function showSlide(e){e<0?currentSlide=totalSlides-1:e>=totalSlides?currentSlide=0:currentSlide=e;const t=-currentSlide*100;galleryContainer.style.transform=`translateX(${t}%)`,galleryIndicators.forEach((e,t)=>{t===currentSlide?e.classList.add('active'):e.classList.remove('active')})}function nextSlide(){showSlide(currentSlide+1)}function prevSlide(){showSlide(currentSlide-1)}function goToSlide(e){showSlide(e)}function handleSwipe(){const e=50,t=touchStartX-touchEndX;Math.abs(t)>e&&(t>0?nextSlide():prevSlide())}function startGalleryAutoPlay(){galleryInterval=setInterval(nextSlide,5e3)}function stopGalleryAutoPlay(){clearInterval(galleryInterval)}function isValidEmail(e){const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return t.test(e)}function isValidPhone(e){const t=/^[\d\s\-\+\(\)]+$/;return t.test(e)&&e.replace(/\D/g,'').length>=8}function showFormMessage(e,t){formMessage.textContent=e,formMessage.className=`form-message ${t}`,formMessage.style.display='block',formMessage.scrollIntoView({behavior:'smooth',block:'nearest'}),setTimeout(()=>{formMessage.style.display='none'},5e3)}function simulateReservationSubmission(e){showFormMessage('Elaborazione prenotazione in corso...','info'),setTimeout(()=>{reservationForm.reset(),showFormMessage(`Grazie ${e.name}! La tua prenotazione per ${e.guests} persone il ${formatDate(e.date)} alle ${e.time} \u00e8 stata confermata. Ti abbiamo inviato una email di conferma a ${e.email}.`,'success'),console.log('Reservation data submitted:',e)},1500)}function formatDate(e){const t={day:'2-digit',month:'2-digit',year:'numeric'};return new Date(e).toLocaleDateString('it-IT',t)}function isInViewport(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}hamburger.addEventListener('click',()=>{hamburger.classList.toggle('active'),navMenu.classList.toggle('active')}),navLinks.forEach(e=>{e.addEventListener('click',()=>{hamburger.classList.remove('active'),navMenu.classList.remove('active')})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener('click',function(e){e.preventDefault();const t=document.querySelector(this.getAttribute('href'));t&&t.scrollIntoView({behavior:'smooth',block:'start'})})}),galleryPrev&&galleryPrev.addEventListener('click',prevSlide),galleryNext&&galleryNext.addEventListener('click',nextSlide),galleryIndicators&&galleryIndicators.forEach((e,t)=>{e.addEventListener('click',()=>goToSlide(t))}),galleryContainer&&(galleryContainer.addEventListener('touchstart',e=>{touchStartX=e.changedTouches[0].screenX}),galleryContainer.addEventListener('touchend',e=>{touchEndX=e.changedTouches[0].screenX,handleSwipe()}),startGalleryAutoPlay(),galleryContainer.addEventListener('mouseenter',stopGalleryAutoPlay),galleryContainer.addEventListener('mouseleave',startGalleryAutoPlay),galleryContainer.addEventListener('touchstart',stopGalleryAutoPlay),galleryContainer.addEventListener('touchend',startGalleryAutoPlay)),reservationForm&&reservationForm.addEventListener('submit',function(e){e.preventDefault();const t=document.getElementById('name').value.trim(),a=document.getElementById('email').value.trim(),s=document.getElementById('phone').value.trim(),r=document.getElementById('date').value,n=document.getElementById('time').value,i=document.getElementById('guests').value,o=document.getElementById('requests').value.trim();if(!t||!a||!s||!r||!n||!i)return void showFormMessage('Per favore, compila tutti i campi obbligatori.','error');if(!isValidEmail(a))return void showFormMessage('Per favore, inserisci un indirizzo email valido.','error');if(!isValidPhone(s))return void showFormMessage('Per favore, inserisci un numero di telefono valido.','error');const l=new Date(r),c=new Date;c.setHours(0,0,0,0),l<c?showFormMessage('La data di prenotazione non pu\u00f2 essere nel passato.','error'):simulateReservationSubmission({name:t,email:a,phone:s,date:r,time:n,guests:i,requests:o})}),document.addEventListener('DOMContentLoaded',()=>{const e=document.getElementById('date');if(e){const t=new Date,a=t.toISOString().split('T')[0];e.setAttribute('min',a)}gallerySlides.length>0&&showSlide(0);const t={threshold:.1,rootMargin:'0px 0px -50px 0px'},a=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity='1',e.target.style.transform='translateY(0)')})},t);document.querySelectorAll('.menu-category, .gallery-carousel, .about-text, .reservation-info, .contact-info').forEach(e=>{e.style.opacity='0',e.style.transform='translateY(20px)',e.style.transition='opacity 0.6s ease, transform 0.6s ease',a.observe(e)}),document.addEventListener('keydown',e=>{'ArrowLeft'===e.key?prevSlide():'ArrowRight'===e.key&&nextSlide()}),document.addEventListener('visibilitychange',()=>{document.hidden?stopGalleryAutoPlay():startGalleryAutoPlay()})}),window.addEventListener('scroll',()=>{const e=document.querySelector('.header');window.scrollY>100?e.style.backgroundColor='rgba(255, 255, 255, 0.98)':e.style.backgroundColor='rgba(255, 255, 255, 0.95)'}),window.addEventListener('scroll',()=>{let e='';const t=document.querySelectorAll('section');t.forEach(t=>{const a=t.offsetTop,s=t.clientHeight;pageYOffset>=a-200&&(e=t.getAttribute('id'))}),navLinks.forEach(t=>{t.classList.remove('active'),t.getAttribute('href').slice(1)===e&&t.classList.add('active')})}),document.addEventListener('DOMContentLoaded',()=>{console.log('Osteria della Tradizione website loaded successfully!')});